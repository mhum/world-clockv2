<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">  
  
    <h:head>  
  		Office Clock
    </h:head>  
    <h:body>       
        <h3>Clock</h3>
		<h:form id="form">
		    <p:outputPanel id="offices">
				<ui:repeat value="#{clockBean.offices}" var="office">
		 			 <h:outputText value="#{office.time}"/>
				</ui:repeat>
			</p:outputPanel>
	     
			<p:poll interval="1" listener="#{clockBean.update}" update="offices" />
		</h:form>
		
		<p:commandButton id="addOfficeButton" type="button" value="Add Office" onclick="PF('dlg').show()" />
         
		<p:dialog header="Enter Office Information" widgetVar="dlg" resizable="false">
		    <h:form id="newOffice">
		        <h:panelGrid columns="2" style="margin-bottom:10px">
		            <h:outputLabel for="officeName" value="Office Name:" />
		            <p:inputText id="officeName" value="#{officeBean.officeName}" />
		        </h:panelGrid>
		 
		        <p:commandButton id="submitButton" value="Submit" update=":display" oncomplete="PF('dlg').hide();"
		        actionListener="#{officeBean.addOffice}"/>
		             
		    </h:form>
		</p:dialog>
		     
		<p:outputPanel id="display" style="display:block;margin-top:10px;">
		    <h:outputText id="name" value="Hello #{officeBean.officeName}" rendered="#{not empty officeBean.officeName}"/>
		</p:outputPanel>     
    </h:body>  
</html> 